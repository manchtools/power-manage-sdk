syntax = "proto3";

package powermanage.v1;

option go_package = "github.com/manchtools/power-manage/sdk/gen/go/powermanage/v1;powermanagev1";

// Unique identifier for an action instance
message ActionId {
  // @gotags: validate:"required,ulid"
  string value = 1;
}

// Unique identifier for a device/agent
message DeviceId {
  // @gotags: validate:"required,ulid"
  string value = 1;
}

// Execution status for any action
enum ExecutionStatus {
  EXECUTION_STATUS_UNSPECIFIED = 0;
  EXECUTION_STATUS_PENDING = 1;
  EXECUTION_STATUS_RUNNING = 2;
  EXECUTION_STATUS_SUCCESS = 3;
  EXECUTION_STATUS_FAILED = 4;
  EXECUTION_STATUS_SKIPPED = 5;
  EXECUTION_STATUS_TIMEOUT = 6;
}

// Desired state for stateful actions
enum DesiredState {
  DESIRED_STATE_PRESENT = 0;  // Install/create/enable
  DESIRED_STATE_ABSENT = 1;   // Remove/delete/disable
}

// Output from command execution
message CommandOutput {
  // @gotags: validate:"omitempty"
  int32 exit_code = 1;
  // @gotags: validate:"omitempty,max=1048576"
  string stdout = 2;
  // @gotags: validate:"omitempty,max=1048576"
  string stderr = 3;
}
